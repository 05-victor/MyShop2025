<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MyShop.Client.Views.Components.Forms.FilterCard"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:buttons="using:MyShop.Client.Views.Components.Buttons"
    mc:Ignorable="d"
    x:Name="RootControl">

    <!--
    FilterCard Component
    ====================
    A reusable filter section card with title, filter controls slot, and action buttons.
    
    Usage:
    <forms:FilterCard Title="Filters" ApplyCommand="{x:Bind ViewModel.ApplyFiltersCommand}">
        <forms:FilterCard.FilterContent>
            <Grid ColumnSpacing="16">
                <ComboBox Header="Category" .../>
                <ComboBox Header="Status" .../>
            </Grid>
        </forms:FilterCard.FilterContent>
    </forms:FilterCard>
    -->

    <Border Style="{StaticResource CardWithShadowStyle}">
        <StackPanel Spacing="16">
            <!-- Header (Optional) -->
            <TextBlock Text="{Binding Title, ElementName=RootControl, Mode=OneWay}"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                       AutomationProperties.HeadingLevel="Level2"
                       Visibility="{Binding Title, ElementName=RootControl, Mode=OneWay, Converter={StaticResource EmptyStringToVisibilityConverter}}"/>

            <!-- Filter Content and Actions in Same Row -->
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Filter Content Slot -->
                <ContentPresenter Grid.Column="0"
                                 Content="{Binding FilterContent, ElementName=RootControl, Mode=OneWay}"
                                 HorizontalAlignment="Stretch"
                                 VerticalAlignment="Center"/>

                <!-- Action Buttons -->
                <StackPanel Grid.Column="1"
                           Orientation="Horizontal"
                           Spacing="8"
                           Margin="0,20,0,0"
                           Visibility="{Binding ShowActions, ElementName=RootControl, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                    
                    <!-- Reset Button -->
                    <buttons:IconButton
                        Variant="Outline"
                        IconGlyph="&#xE72C;"
                        Text="Reset"
                        Command="{Binding ResetCommand, ElementName=RootControl, Mode=OneWay}"
                        ToolTipService.ToolTip="Reset Filter"/>

                    <!-- Apply Button -->
                    <Button Style="{StaticResource PrimaryButtonStyle}"
                           Command="{Binding ApplyCommand, ElementName=RootControl, Mode=OneWay}"
                           AutomationProperties.Name="Apply filters"
                           AutomationProperties.HelpText="Apply selected filters to results"
                           AccessKey="A"
                           UseSystemFocusVisuals="True">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE71C;" FontSize="14"/>
                            <TextBlock Text="{Binding ApplyButtonText, ElementName=RootControl, Mode=OneWay}" FontWeight="SemiBold"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </StackPanel>
    </Border>
</UserControl>
