<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MyShop.Client.Views.Components.Chat.MessageBubble"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Name="RootControl">

    <!--
    MessageBubble Component
    =======================
    Chat message bubble for user or AI messages.
    -->

    <Grid Margin="0,4">
        <Border x:Name="BubbleBorder"
               MaxWidth="320"
               Padding="12,8"
               CornerRadius="8"
               HorizontalAlignment="Left">
            <StackPanel Spacing="4">
                <!-- Bot Image (if present) -->
                <Border x:Name="ImageBorder"
                        CornerRadius="8"
                        Visibility="{Binding ImageUrl, ElementName=RootControl, Converter={StaticResource NullToVisibilityConverter}, Mode=OneWay}">
                    <Image x:Name="MessageImage"
                           Source="{Binding ImageUrl, ElementName=RootControl, Mode=OneWay}"
                           MaxWidth="200"
                           Stretch="Uniform"
                           Tapped="MessageImage_Tapped"
                           PointerEntered="MessageImage_PointerEntered"
                           PointerExited="MessageImage_PointerExited"/>
                </Border>
                
                <!-- Message Text -->
                <TextBlock x:Name="MessageTextBlock"
                          TextWrapping="Wrap"
                          FontSize="14"
                          IsTextSelectionEnabled="True"/>
                
                <!-- Timestamp -->
                <TextBlock x:Name="TimestampText"
                          FontSize="11"
                          Opacity="0.7"
                          HorizontalAlignment="Right"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>