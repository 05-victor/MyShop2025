<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MyShop.Client.Views.Shell.CustomerDashboardShell"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avatars="using:MyShop.Client.Views.Components.Avatars"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <SolidColorBrush x:Key="NavigationViewExpandedPaneBackground" Color="#FF1E293B" />
        <SolidColorBrush x:Key="NavigationViewDefaultPaneBackground" Color="#FF1E293B" />
        <SolidColorBrush x:Key="NavigationViewItemForeground" Color="#FFD1D5DB" />
        <SolidColorBrush x:Key="NavigationViewItemForegroundSelected" Color="White" />
        <SolidColorBrush x:Key="NavigationViewItemForegroundPointerOver" Color="White" />
        <SolidColorBrush x:Key="NavigationViewItemBackgroundSelectedPointerOver" Color="#FF00AEEF" />
        <SolidColorBrush x:Key="NavigationViewItemBackgroundSelected" Color="#FF00AEEF" />
        <SolidColorBrush x:Key="NavigationViewItemBackgroundPointerOver" Color="#1A00AEEF" />
    </Page.Resources>

    <NavigationView
        x:Name="Nav"
        CompactPaneLength="56"
        IsBackButtonVisible="Collapsed"
        IsPaneToggleButtonVisible="False"
        IsSettingsVisible="False"
        OpenPaneLength="220"
        PaneDisplayMode="Left"
        SelectionChanged="Nav_SelectionChanged">

        <NavigationView.PaneHeader>
            <StackPanel Padding="20,24" Spacing="8">
                <avatars:UserAvatar 
                    DisplayName="{x:Bind ViewModel.CurrentUser.FullName, Mode=OneWay, FallbackValue='Customer'}"
                    ImageSource="{x:Bind ViewModel.CurrentUser.Avatar, Mode=OneWay, FallbackValue=''}"
                    Size="Medium"
                    IsEmailVerified="{x:Bind ViewModel.CurrentUser.IsEmailVerified, Mode=OneWay, FallbackValue=False}"
                    ShowVerificationBadge="True"/>
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="White" Text="MyShop2025" />
                <TextBlock FontSize="12" Foreground="#9CA3AF" Text="Welcome back!" />
            </StackPanel>
        </NavigationView.PaneHeader>

        <!-- CUSTOMER MENU ITEMS -->
        <NavigationView.MenuItems>
            <NavigationViewItem Content="Home" Tag="home">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE80F;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Shopping" Tag="shopping">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE719;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Cart" Tag="cart">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE7BF;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Purchase Orders" Tag="purchaseOrders">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE7B8;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Profile" Tag="profile">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE77B;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Settings" Tag="settings">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE713;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>
        </NavigationView.MenuItems>

        <NavigationView.PaneFooter>
            <StackPanel Padding="16" Background="#0F172A" Spacing="12">
                <Border Padding="12" Background="#334155" CornerRadius="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <avatars:UserAvatar 
                            Grid.Column="0"
                            Margin="0,0,12,0"
                            DisplayName="{x:Bind ViewModel.CurrentUser.FullName, Mode=OneWay, FallbackValue='Customer'}"
                            ImageSource="{x:Bind ViewModel.CurrentUser.Avatar, Mode=OneWay, FallbackValue=''}"
                            Size="Small"
                            IsEmailVerified="{x:Bind ViewModel.CurrentUser.IsEmailVerified, Mode=OneWay, FallbackValue=False}"
                            ShowVerificationBadge="True"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="{x:Bind ViewModel.CurrentUser.Username, Mode=OneWay, FallbackValue='Customer'}"
                                      FontSize="14" FontWeight="SemiBold" Foreground="White"
                                      TextTrimming="CharacterEllipsis" />
                            <TextBlock Text="{x:Bind ViewModel.CurrentUser.Email, Mode=OneWay, FallbackValue='customer@myshop.com'}"
                                      FontSize="11" Foreground="#9CA3AF"
                                      TextTrimming="CharacterEllipsis" />
                        </StackPanel>
                    </Grid>
                </Border>

                <Button Padding="12,10" HorizontalAlignment="Stretch"
                       Background="#DC2626" BorderThickness="0"
                       Command="{x:Bind ViewModel.LogoutCommand}"
                       CornerRadius="6" Foreground="White">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Spacing="8">
                        <FontIcon FontSize="14" Foreground="White" Glyph="&#xE7E8;" />
                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="Logout" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </NavigationView.PaneFooter>

        <Frame x:Name="ContentFrame" />
    </NavigationView>
</Page>
