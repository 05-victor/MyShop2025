<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MyShop.Client.Views.Shell.DashboardShellPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:MyShop.Client.Views.Shell"
    xmlns:avatars="using:MyShop.Client.Views.Components.Avatars"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!--  Brush để NavigationView dùng pane nền tối + item màu giống sidebar cũ  -->
    <Page.Resources>
        <!--  Nền sidebar  -->
        <SolidColorBrush x:Key="NavigationViewExpandedPaneBackground" Color="#FF1F2937" />
        <SolidColorBrush x:Key="NavigationViewDefaultPaneBackground" Color="#FF1F2937" />

        <!--  Màu chữ/icon cho item  -->
        <SolidColorBrush x:Key="NavigationViewItemForeground" Color="#FF9CA3AF" />
        <SolidColorBrush x:Key="NavigationViewItemForegroundSelected" Color="White" />
        <SolidColorBrush x:Key="NavigationViewItemForegroundPointerOver" Color="White" />

        <!--  Màu nền item khi được chọn  -->
        <SolidColorBrush x:Key="NavigationViewItemBackgroundSelected" Color="#FF3B82F6" />
        <SolidColorBrush x:Key="NavigationViewItemBackgroundPointerOver" Color="#FF374151" />
    </Page.Resources>

    <NavigationView
        x:Name="Nav"
        CompactPaneLength="56"
        IsBackButtonVisible="Collapsed"
        IsPaneToggleButtonVisible="False"
        IsSettingsVisible="False"
        OpenPaneLength="220"
        PaneDisplayMode="Left"
        SelectionChanged="Nav_SelectionChanged"
        >

        <!--  PHẦN TRÊN: Logo + Branding giống sidebar cũ  -->
        <NavigationView.PaneHeader>
            <StackPanel Padding="20,24" Spacing="8">
                <!-- Remove Status binding to avoid enum parse error -->
                <avatars:UserAvatar DisplayName="Admin User"
                                   Size="Medium"/>
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Foreground="White"
                    Text="MyShop2025" />
                <!--  Bạn có thể binding WelcomeMessage từ ViewModel nếu muốn  -->
                <TextBlock
                    FontSize="12"
                    Foreground="#9CA3AF"
                    Text="Welcome back, admin!" />
            </StackPanel>
        </NavigationView.PaneHeader>

        <!--  MENU CHÍNH: dùng NavigationViewItem nhưng icon/text giống layout cũ  -->
        <NavigationView.MenuItems>

            <!--  Dashboard  -->
            <NavigationViewItem Content="Dashboard" Tag="dashboard">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE80F;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Products  -->
            <NavigationViewItem Content="Products" Tag="products">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE7B8;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Orders  -->
            <NavigationViewItem Content="Orders" Tag="orders">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE7BF;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Reports  -->
            <NavigationViewItem Content="Reports" Tag="reports">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE9D9;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Users  -->
            <NavigationViewItem Content="Users" Tag="users">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE716;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Agent Requests  -->
            <NavigationViewItem Content="Agent Requests" Tag="agentRequests">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE8F2;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Profile  -->
            <NavigationViewItem Content="Profile" Tag="profile">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE77B;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <!--  Settings  -->
            <NavigationViewItem Content="Settings" Tag="settings">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE713;" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>

        </NavigationView.MenuItems>

        <!--  PHẦN DƯỚI: thẻ user + nút Logout giống sidebar cũ  -->
        <NavigationView.PaneFooter>
            <StackPanel
                Padding="16"
                Background="#111827"
                Spacing="12">
                <!--  User card  -->
                <Border
                    Padding="12"
                    Background="#374151"
                    CornerRadius="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border
                            Grid.Column="0"
                            Width="36"
                            Height="36"
                            Margin="0,0,12,0"
                            Background="#6B7280"
                            CornerRadius="18">
                            <FontIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="16"
                                Foreground="White"
                                Glyph="&#xE77B;" />
                        </Border>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <!--  TODO: có thể binding từ CurrentUser.Username / Email  -->
                            <TextBlock
                                FontSize="14"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Text="admin"
                                TextTrimming="CharacterEllipsis" />
                            <TextBlock
                                FontSize="11"
                                Foreground="#9CA3AF"
                                Text="admin@example.com"
                                TextTrimming="CharacterEllipsis" />
                        </StackPanel>
                    </Grid>
                </Border>

                <!--  Logout  -->
                <Button
                    Padding="12,10"
                    HorizontalAlignment="Stretch"
                    Background="#DC2626"
                    BorderThickness="0"
                    Command="{x:Bind ViewModel.LogoutCommand}"
                    CornerRadius="6"
                    Foreground="White">
                    <StackPanel
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="8">
                        <FontIcon
                            FontSize="14"
                            Foreground="White"
                            Glyph="&#xE7E8;" />
                        <TextBlock
                            FontSize="14"
                            FontWeight="SemiBold"
                            Text="Logout" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </NavigationView.PaneFooter>

        <!--  MAIN CONTENT: nơi hiển thị AdminDashboardPage, ProductsPage,...  -->
        <Frame x:Name="ContentFrame" />
    </NavigationView>
</Page>
