<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MyShop.Client.Views.Settings.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:MyShop.Client.Views.Settings"
    xmlns:vm="using:MyShop.Client.ViewModels.Settings"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:MyShop.Client.Views.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <converters:EmptyStringToVisibilityConverter x:Key="StringToVisibilityConverter" />
        <converters:InverseBoolConverter x:Key="InverseBoolConverter" />
    </Page.Resources>

    <Grid>
        <!--  Loading Overlay  -->
        <Border
            Background="#80000000"
            Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
            Canvas.ZIndex="999">
            <ProgressRing
                Width="60"
                Height="60"
                IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                Foreground="{ThemeResource AccentFillColorDefaultBrush}" />
        </Border>

        <!--  Main Content  -->
        <ScrollViewer>
            <StackPanel MaxWidth="900" Padding="40" Spacing="24">
                <!--  Header  -->
                <StackPanel Spacing="8">
                    <TextBlock Style="{StaticResource DisplayHeadingStyle}" Text="Settings" />
                    <TextBlock
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="Customize your app preferences and manage your account"
                        TextWrapping="Wrap" />
                </StackPanel>

                <!--  Error Message  -->
                <InfoBar
                    IsOpen="{x:Bind ViewModel.HasError, Mode=OneWay}"
                    Message="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                    Severity="Error"
                    Title="Error"
                    IsClosable="True" />

                <!--  Tabs  -->
                <TabView IsAddTabButtonVisible="False">
                    <!--  General Tab  -->
                    <TabViewItem Header="General" IsClosable="False">
                        <TabViewItem.IconSource>
                            <FontIconSource Glyph="&#xE713;" />
                        </TabViewItem.IconSource>
                        <ScrollViewer>
                            <StackPanel Padding="0,24" Spacing="24">
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="16">
                                        <TextBlock FontSize="16" FontWeight="SemiBold" Text="Shop Information" />

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Shop Name" />
                                            <TextBox Style="{StaticResource BaseInputStyle}" PlaceholderText="MyShop 2025" Text="MyShop 2025" />
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Address" />
                                            <TextBox
                                                Style="{StaticResource BaseInputStyle}"
                                                AcceptsReturn="True"
                                                Height="80"
                                                PlaceholderText="Enter shop address"
                                                Text="123 Business St, City, State 12345"
                                                TextWrapping="Wrap" />
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Timezone" />
                                            <ComboBox Style="{StaticResource BaseInputStyle}" SelectedIndex="0" HorizontalAlignment="Stretch">
                                                <ComboBoxItem Content="(UTC-5) Eastern Time" />
                                                <ComboBoxItem Content="(UTC-6) Central Time" />
                                                <ComboBoxItem Content="(UTC-7) Mountain Time" />
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <Button HorizontalAlignment="Left" Background="{ThemeResource AccentFillColorDefaultBrush}" Command="{x:Bind ViewModel.SaveCommand}" Foreground="White">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon FontSize="14" Glyph="&#xE74E;" />
                                        <TextBlock Text="Save Changes" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!--  Preferences Tab  -->
                    <TabViewItem Header="Preferences" IsClosable="False">
                        <TabViewItem.IconSource>
                            <FontIconSource Glyph="&#xE8B8;" />
                        </TabViewItem.IconSource>
                        <ScrollViewer>
                            <StackPanel Padding="0,24" Spacing="24">
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="16">
                                        <TextBlock FontSize="16" FontWeight="SemiBold" Text="Data Display" />

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Products per page" />
                                            <ComboBox SelectedItem="{x:Bind ViewModel.ProductsPageSize, Mode=TwoWay}" ItemsSource="{x:Bind ViewModel.PageSizeOptions}" Style="{StaticResource BaseInputStyle}" HorizontalAlignment="Stretch" />
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Orders per page" />
                                            <ComboBox SelectedItem="{x:Bind ViewModel.OrdersPageSize, Mode=TwoWay}" ItemsSource="{x:Bind ViewModel.PageSizeOptions}" Style="{StaticResource BaseInputStyle}" HorizontalAlignment="Stretch" />
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Style="{StaticResource InputLabelStyle}" Text="Customers per page" />
                                            <ComboBox SelectedItem="{x:Bind ViewModel.CustomersPageSize, Mode=TwoWay}" ItemsSource="{x:Bind ViewModel.PageSizeOptions}" Style="{StaticResource BaseInputStyle}" HorizontalAlignment="Stretch" />
                                        </StackPanel>

                                        <Border Padding="0,12" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,1,0,0" Margin="0,8,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Remember Last Page" FontWeight="SemiBold" />
                                                    <TextBlock FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Open the last page you were viewing" TextWrapping="Wrap" />
                                                </StackPanel>
                                                <ToggleSwitch Grid.Column="1" IsOn="{x:Bind ViewModel.RestoreLastPage, Mode=TwoWay}" OffContent="" OnContent="" />
                                            </Grid>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <Button HorizontalAlignment="Left" Background="{ThemeResource AccentFillColorDefaultBrush}" Command="{x:Bind ViewModel.SaveCommand}" Foreground="White">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon FontSize="14" Glyph="&#xE74E;" />
                                        <TextBlock Text="Save Changes" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!--  Appearance Tab  -->
                    <TabViewItem Header="Appearance" IsClosable="False">
                        <TabViewItem.IconSource>
                            <FontIconSource Glyph="&#xE771;" />
                        </TabViewItem.IconSource>
                        <ScrollViewer>
                            <StackPanel Padding="0,24" Spacing="24">
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="16">
                                        <TextBlock FontSize="16" FontWeight="SemiBold" Text="Appearance Settings" />
                                        <TextBlock 
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                            Text="Theme and language settings will be available in a future update."
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!--  Notifications Tab  -->
                    <TabViewItem Header="Notifications" IsClosable="False">
                        <TabViewItem.IconSource>
                            <FontIconSource Glyph="&#xEA8F;" />
                        </TabViewItem.IconSource>
                        <ScrollViewer>
                            <StackPanel Padding="0,24" Spacing="24">
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="12">
                                        <TextBlock FontSize="16" FontWeight="SemiBold" Text="Notification Settings" />

                                        <Border Padding="0,12" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Email Alerts" FontWeight="SemiBold" />
                                                    <TextBlock FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Receive email notifications for important events" TextWrapping="Wrap" />
                                                </StackPanel>
                                                <ToggleSwitch Grid.Column="1" IsOn="True" OffContent="" OnContent="" />
                                            </Grid>
                                        </Border>

                                        <Border Padding="0,12" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Sound Notifications" FontWeight="SemiBold" />
                                                    <TextBlock FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Play sounds with notifications" TextWrapping="Wrap" />
                                                </StackPanel>
                                                <ToggleSwitch Grid.Column="1" IsOn="{x:Bind ViewModel.EnableSoundNotifications, Mode=TwoWay}" OffContent="" OnContent="" />
                                            </Grid>
                                        </Border>

                                        <Border Padding="0,12" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Order Notifications" FontWeight="SemiBold" />
                                                    <TextBlock FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Get notified when new orders are placed" TextWrapping="Wrap" />
                                                </StackPanel>
                                                <ToggleSwitch Grid.Column="1" IsOn="{x:Bind ViewModel.NotifyOnNewOrders, Mode=TwoWay}" OffContent="" OnContent="" />
                                            </Grid>
                                        </Border>

                                        <Border Padding="0,12">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel>
                                                    <TextBlock Text="Low Stock Alerts" FontWeight="SemiBold" />
                                                    <TextBlock FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Receive alerts when product stock is low" TextWrapping="Wrap" />
                                                </StackPanel>
                                                <ToggleSwitch Grid.Column="1" IsOn="{x:Bind ViewModel.NotifyOnLowStock, Mode=TwoWay}" OffContent="" OnContent="" />
                                            </Grid>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <Button HorizontalAlignment="Left" Background="{ThemeResource AccentFillColorDefaultBrush}" Command="{x:Bind ViewModel.SaveCommand}" Foreground="White">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon FontSize="14" Glyph="&#xE74E;" />
                                        <TextBlock Text="Save Changes" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>

                    <!--  About Tab  -->
                    <TabViewItem Header="About" IsClosable="False">
                        <TabViewItem.IconSource>
                            <FontIconSource Glyph="&#xE946;" />
                        </TabViewItem.IconSource>
                        <ScrollViewer>
                            <StackPanel Padding="0,24" Spacing="24">
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="24">
                                        <StackPanel Orientation="Horizontal" Spacing="16">
                                            <Border Width="64" Height="64" Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="8">
                                                <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="24" FontWeight="Bold" Foreground="White" Text="MS" />
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock FontSize="18" FontWeight="SemiBold" Text="MyShop 2025" />
                                                <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Admin Management Dashboard" />
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <Grid Padding="0,8" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                                <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Version" />
                                                <TextBlock HorizontalAlignment="Right" FontWeight="SemiBold" Text="2.0.0" />
                                            </Grid>
                                            <Grid Padding="0,8" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                                <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Release Date" />
                                                <TextBlock HorizontalAlignment="Right" FontWeight="SemiBold" Text="November 2025" />
                                            </Grid>
                                            <Grid Padding="0,8" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                                                <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="License" />
                                                <TextBlock HorizontalAlignment="Right" FontWeight="SemiBold" Text="Commercial" />
                                            </Grid>
                                            <Grid Padding="0,8">
                                                <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Support" />
                                                <TextBlock HorizontalAlignment="Right" FontWeight="SemiBold" Text="support@myshop.com" />
                                            </Grid>
                                        </StackPanel>

                                        <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="Â© 2025 MyShop. All rights reserved." TextAlignment="Center" />
                                    </StackPanel>
                                </Border>

                                <!--  Maintenance  -->
                                <Border
                                    Padding="24"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                    <StackPanel Spacing="16">
                                        <TextBlock FontSize="16" FontWeight="SemiBold" Text="Maintenance" />

                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <Button Command="{x:Bind ViewModel.CalculateCacheSizeCommand}">
                                                <StackPanel Orientation="Horizontal" Spacing="8">
                                                    <FontIcon FontSize="14" Glyph="&#xE9D9;" />
                                                    <TextBlock Text="Calculate Cache" />
                                                </StackPanel>
                                            </Button>
                                            <TextBlock VerticalAlignment="Center" Foreground="{ThemeResource AccentFillColorDefaultBrush}" Text="{x:Bind ViewModel.CacheSize, Mode=OneWay}" />
                                        </StackPanel>

                                        <Button Command="{x:Bind ViewModel.ClearCacheCommand}">
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <FontIcon FontSize="14" Glyph="&#xE74D;" />
                                                <TextBlock Text="Clear Cache" />
                                            </StackPanel>
                                        </Button>

                                        <Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="0,8" />

                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <Button Command="{x:Bind ViewModel.ExportSettingsCommand}">
                                                <StackPanel Orientation="Horizontal" Spacing="8">
                                                    <FontIcon FontSize="14" Glyph="&#xEDE1;" />
                                                    <TextBlock Text="Export Settings" />
                                                </StackPanel>
                                            </Button>
                                            <Button Command="{x:Bind ViewModel.ImportSettingsCommand}">
                                                <StackPanel Orientation="Horizontal" Spacing="8">
                                                    <FontIcon FontSize="14" Glyph="&#xE8B5;" />
                                                    <TextBlock Text="Import Settings" />
                                                </StackPanel>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabViewItem>
                </TabView>

                <!--  Info Box  -->
                <InfoBar IsOpen="True" Severity="Informational" Title="Note" Message="Settings are saved locally on this device and will persist between sessions." IsClosable="False" />
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
