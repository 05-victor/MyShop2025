<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MyShop.Client.Views.Auth.ForgotPasswordRequestPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:MyShop.Client.Common.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:layout="using:MyShop.Client.Views.Components.Layout"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="{ThemeResource LayerFillColorDefaultBrush}"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>

    <Page.Transitions>
        <TransitionCollection>
            <EntranceThemeTransition FromVerticalOffset="50"/>
        </TransitionCollection>
    </Page.Transitions>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <layout:PageHeader
            Grid.Row="0"
            Margin="40,24,40,24"
            Title="Reset password"
            Subtitle="Enter your email address. We'll send a verification code."/>

        <!-- Content -->
        <ScrollViewer Grid.Row="1"
                      HorizontalScrollBarVisibility="Disabled"
                      VerticalScrollBarVisibility="Auto">
            <Grid MaxWidth="480"
                  Margin="40,0,40,40"
                  HorizontalAlignment="Center">
                
                <!-- Card -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="32">
                    <StackPanel Spacing="24">
                        
                        <!-- Email Input -->
                        <StackPanel Spacing="8">
                            <TextBlock Style="{StaticResource InputLabelStyle}">
                                <Run Text="Email address"/>
                                <Run Foreground="{ThemeResource SystemErrorTextColor}" Text="*"/>
                            </TextBlock>
                            <TextBox x:Name="EmailTextBox"
                                     Style="{StaticResource BaseInputStyle}"
                                     PlaceholderText="example@email.com"
                                     InputScope="EmailSmtpAddress"
                                     Text="{x:Bind ViewModel.Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Use the email you used to create your account."
                                       FontSize="{StaticResource FontSize_SM}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            
                            <!-- Error Message -->
                            <TextBlock x:Name="ErrorText"
                                       Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                                       Visibility="{x:Bind ViewModel.HasError, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
                                       Style="{StaticResource ValidationErrorStyle}"/>
                        </StackPanel>

                        <!-- Loading Indicator -->
                        <ProgressBar IsIndeterminate="True"
                                     Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>

                        <!-- Actions -->
                        <StackPanel Spacing="12">
                            <!-- Send Code Button -->
                            <Button Style="{StaticResource PrimaryButtonStyle}"
                                    Content="Send code"
                                    HorizontalAlignment="Stretch"
                                    Command="{x:Bind ViewModel.SendCodeCommand}"
                                    IsEnabled="{x:Bind ViewModel.CanSendCode, Mode=OneWay}"/>
                            
                            <!-- Back to Login Button -->
                            <Button Style="{StaticResource SecondaryButtonStyle}"
                                    Content="Back to login"
                                    HorizontalAlignment="Stretch"
                                    Command="{x:Bind ViewModel.BackToLoginCommand}"/>
                        </StackPanel>

                    </StackPanel>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>
