<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="MyShop.Client.Views.Dialogs.EditUserDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:forms="using:MyShop.Client.Views.Components.Forms"
    xmlns:feedback="using:MyShop.Client.Views.Components.Feedback"
    mc:Ignorable="d"
    Title="Edit User"
    PrimaryButtonText="Save Changes"
    SecondaryButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonClick="ContentDialog_PrimaryButtonClick"
    Style="{StaticResource DefaultContentDialogStyle}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
        <StackPanel Spacing="16" Padding="8">
            
            <!-- User ID (Read-only) -->
            <forms:FormField Label="User ID">
                <TextBox Text="{x:Bind ViewModel.UserId, Mode=OneWay}"
                        IsReadOnly="True"
                        Background="{ThemeResource LayerFillColorDefaultBrush}"/>
            </forms:FormField>

            <!-- Full Name -->
            <forms:FormField Label="Full Name" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.FullName, Mode=TwoWay}"
                        PlaceholderText="Enter full name"
                        MaxLength="100"/>
            </forms:FormField>

            <!-- Email -->
            <forms:FormField Label="Email" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.Email, Mode=TwoWay}"
                        PlaceholderText="Enter email address"
                        MaxLength="100"
                        InputScope="EmailSmtpAddress"/>
            </forms:FormField>

            <!-- Phone -->
            <forms:FormField Label="Phone Number" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.Phone, Mode=TwoWay}"
                        PlaceholderText="Enter phone number"
                        MaxLength="20"
                        InputScope="TelephoneNumber"/>
            </forms:FormField>

            <!-- Role -->
            <forms:FormField Label="Role" IsRequired="True">
                <ComboBox ItemsSource="{x:Bind ViewModel.AvailableRoles}"
                         SelectedItem="{x:Bind ViewModel.SelectedRole, Mode=TwoWay}"
                         HorizontalAlignment="Stretch"/>
            </forms:FormField>

            <!-- Status -->
            <forms:FormField Label="Status" IsRequired="True">
                <ComboBox ItemsSource="{x:Bind ViewModel.AvailableStatuses}"
                         SelectedItem="{x:Bind ViewModel.SelectedStatus, Mode=TwoWay}"
                         HorizontalAlignment="Stretch"/>
            </forms:FormField>

            <!-- Warning Message -->
            <feedback:AlertBox 
                Variant="Warning"
                Message="Changing the user's role will affect their access permissions." />

        </StackPanel>
    </ScrollViewer>
</ContentDialog>
