<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="MyShop.Client.Views.Dialogs.ViewProfileDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:MyShop.Client.Common.Converters"
    xmlns:layout="using:MyShop.Client.Views.Components.Layout"
    xmlns:badges="using:MyShop.Client.Views.Components.Badges"
    mc:Ignorable="d"
    Title="Agent Profile"
    CloseButtonText="Close"
    DefaultButton="Close"
    Style="{StaticResource DefaultContentDialogStyle}">

    <ContentDialog.Resources>
        <converters:StringToImageSourceConverter x:Key="StringToImageSourceConverter"/>
    </ContentDialog.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500" MinWidth="400">
        <StackPanel Spacing="20" Padding="8">
            
            <!-- Avatar and Name Section -->
            <StackPanel HorizontalAlignment="Center" Spacing="12">
                <PersonPicture 
                    Width="80" 
                    Height="80"
                    DisplayName="{x:Bind FullName, Mode=OneWay}"
                    ProfilePicture="{x:Bind AvatarUrl, Mode=OneWay, Converter={StaticResource StringToImageSourceConverter}}"/>
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="{x:Bind FullName, Mode=OneWay}"
                              FontSize="20"
                              FontWeight="SemiBold"
                              Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="{x:Bind Email, Mode=OneWay}"
                              FontSize="14"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                              HorizontalAlignment="Center"/>
                </StackPanel>
            </StackPanel>

            <!-- Divider -->
            <layout:Divider />

            <!-- Contact Information -->
            <StackPanel Spacing="12">
                <TextBlock Text="Contact Information" 
                          FontSize="14" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource TextTertiaryBrush}"/>
                
                <!-- Phone -->
                <layout:DetailRow
                    IconGlyph="&#xE717;"
                    Label="Phone"
                    Value="{x:Bind Phone, Mode=OneWay}" />

                <!-- Email -->
                <layout:DetailRow
                    IconGlyph="&#xE715;"
                    Label="Email"
                    Value="{x:Bind Email, Mode=OneWay}" />
            </StackPanel>

            <!-- Divider -->
            <layout:Divider />

            <!-- Request Details -->
            <StackPanel Spacing="12">
                <TextBlock Text="Request Details" 
                          FontSize="14" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource TextTertiaryBrush}"/>

                <!-- Submitted Date -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <FontIcon Grid.Column="0" 
                             Glyph="&#xE787;" 
                             FontSize="16" 
                             Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Grid.Column="1" 
                              FontSize="14"
                              Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                              VerticalAlignment="Center">
                        <Run Text="Submitted: "/>
                        <Run Text="{x:Bind SubmittedDate, Mode=OneWay}" FontWeight="SemiBold"/>
                    </TextBlock>
                </Grid>

                <!-- Status -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <FontIcon Grid.Column="0" 
                             Glyph="&#xE9F5;" 
                             FontSize="16" 
                             Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="Status:" 
                                  FontSize="14"
                                  Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                  VerticalAlignment="Center"/>
                        <badges:StatusBadge 
                            Text="{x:Bind Status, Mode=OneWay}"
                            Variant="{x:Bind StatusVariant, Mode=OneWay}"/>
                    </StackPanel>
                </Grid>
            </StackPanel>

            <!-- Divider -->
            <layout:Divider />

            <!-- Experience Section -->
            <StackPanel Spacing="8">
                <TextBlock Text="Experience" 
                          FontSize="14" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource TextTertiaryBrush}"/>
                <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                       CornerRadius="8"
                       Padding="12">
                    <TextBlock Text="{x:Bind Experience, Mode=OneWay}"
                              FontSize="13"
                              Foreground="{ThemeResource Gray400Brush}"
                              TextWrapping="Wrap"/>
                </Border>
            </StackPanel>

            <!-- Reason Section -->
            <StackPanel Spacing="8">
                <TextBlock Text="Reason for Applying" 
                          FontSize="14" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource TextTertiaryBrush}"/>
                <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                       CornerRadius="8"
                       Padding="12">
                    <TextBlock Text="{x:Bind Reason, Mode=OneWay}"
                              FontSize="13"
                              Foreground="{ThemeResource Gray400Brush}"
                              TextWrapping="Wrap"/>
                </Border>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</ContentDialog>
