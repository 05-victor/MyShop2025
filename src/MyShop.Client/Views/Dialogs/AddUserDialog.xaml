<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="MyShop.Client.Views.Dialogs.AddUserDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:forms="using:MyShop.Client.Views.Components.Forms"
    xmlns:feedback="using:MyShop.Client.Views.Components.Feedback"
    mc:Ignorable="d"
    Title="Add New User"
    PrimaryButtonText="Add User"
    SecondaryButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonClick="ContentDialog_PrimaryButtonClick"
    Style="{StaticResource DefaultContentDialogStyle}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
        <StackPanel Spacing="16" Padding="8">
            
            <!-- Full Name -->
            <forms:FormField Label="Full Name" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.FullName, Mode=TwoWay}"
                        PlaceholderText="Enter full name"
                        MaxLength="100"/>
            </forms:FormField>

            <!-- Email -->
            <forms:FormField Label="Email" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.Email, Mode=TwoWay}"
                        PlaceholderText="Enter email address"
                        MaxLength="100"
                        InputScope="EmailSmtpAddress"/>
            </forms:FormField>

            <!-- Phone -->
            <forms:FormField Label="Phone Number" IsRequired="True">
                <TextBox Text="{x:Bind ViewModel.Phone, Mode=TwoWay}"
                        PlaceholderText="Enter phone number"
                        MaxLength="20"
                        InputScope="TelephoneNumber"/>
            </forms:FormField>

            <!-- Role -->
            <forms:FormField Label="Role" IsRequired="True">
                <ComboBox ItemsSource="{x:Bind ViewModel.AvailableRoles}"
                         SelectedItem="{x:Bind ViewModel.SelectedRole, Mode=TwoWay}"
                         HorizontalAlignment="Stretch"/>
            </forms:FormField>

            <!-- Password -->
            <forms:FormField Label="Password" IsRequired="True">
                <PasswordBox Password="{x:Bind ViewModel.Password, Mode=TwoWay}"
                            PlaceholderText="Enter password (min 6 characters)"
                            MaxLength="50"/>
            </forms:FormField>

            <!-- Confirm Password -->
            <forms:FormField Label="Confirm Password" IsRequired="True">
                <PasswordBox Password="{x:Bind ViewModel.ConfirmPassword, Mode=TwoWay}"
                            PlaceholderText="Re-enter password"
                            MaxLength="50"/>
            </forms:FormField>

            <!-- Info Message -->
            <feedback:AlertBox 
                Variant="Info"
                Message="A welcome email will be sent to the user with their login credentials." />

        </StackPanel>
    </ScrollViewer>
</ContentDialog>
