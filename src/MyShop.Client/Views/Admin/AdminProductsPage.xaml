<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MyShop.Client.Views.Admin.AdminProductsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:badges="using:MyShop.Client.Views.Components.Badges"
    xmlns:components="using:MyShop.Client.Views.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:MyShop.Client.Views.Admin"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pagination="using:MyShop.Client.Views.Components.Pagination"
    xmlns:viewmodels="using:MyShop.Client.ViewModels.Admin"
    xmlns:skeletons="using:MyShop.Client.Views.Components.Skeletons"
    xmlns:converters="using:MyShop.Client.Common.Converters"
    x:Name="MyPage"
    Background="#F3F4F6"
    mc:Ignorable="d">

    <Page.Transitions>
        <TransitionCollection>
            <NavigationThemeTransition />
        </TransitionCollection>
    </Page.Transitions>

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" />

        <!--  Card style (giống card trắng bo góc trong React)  -->
        <Style x:Key="CardBorderStyle" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="BorderBrush" Value="#E5E7EB" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Margin" Value="0,0,0,16" />
        </Style>

        <!--  Badge stock  -->
        <Style x:Key="StockBadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="999" />
            <Setter Property="Padding" Value="4,2" />
            <Setter Property="HorizontalAlignment" Value="Left" />
        </Style>

        <!--  Action icon button nhỏ  -->
        <Style x:Key="IconGhostButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="4" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
        </Style>

    </Page.Resources>

    <Grid>
        <RefreshContainer RefreshRequested="RefreshContainer_RefreshRequested">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Padding="32" Spacing="24">

                <!--  PAGE TITLE  -->
                <TextBlock
                    Foreground="#111827"
                    Style="{StaticResource DisplayHeadingStyle}"
                    Text="Products Management" />

                <!--  HEADER ACTIONS  -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Left: Export  -->
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <!--  Export  -->
                        <Button
                            Height="44"
                            Padding="16,0"
                            Background="#1A4D8F"
                            BorderThickness="0"
                            Click="ExportButton_Click"
                            CornerRadius="12"
                            Foreground="White"
                            ToolTipService.ToolTip="Export products to CSV file">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE896;" FontSize="16"/>
                                <TextBlock Text="Export" FontSize="14" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!--  Right: Refresh  -->
                    <Button
                        Grid.Column="1"
                        Padding="12,8"
                        Background="White"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        Command="{x:Bind ViewModel.RefreshCommand}"
                        CornerRadius="8"
                        Foreground="#111827"
                        ToolTipService.ToolTip="Reload product list from server">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon
                                Width="24"
                                Height="24"
                                Glyph="&#xE72C;" />
                            <!--  Refresh  -->
                            <TextBlock Text="Refresh" />
                        </StackPanel>
                    </Button>
                </Grid>

                <!--  SEARCH CARD  -->
                <Border Style="{StaticResource CardBorderStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <AutoSuggestBox
                            x:Name="SearchAutoSuggestBox"
                            Grid.Column="0"
                            Height="40"
                            BorderBrush="#E5E7EB"
                            CornerRadius="8"
                            PlaceholderText="Search products by name, SKU, or category..."
                            QueryIcon="Find"
                            Text="{x:Bind ViewModel.SearchQuery, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            TextChanged="SearchAutoSuggestBox_TextChanged"
                            SuggestionChosen="SearchAutoSuggestBox_SuggestionChosen"
                            QuerySubmitted="SearchAutoSuggestBox_QuerySubmitted" />

                        <Button
                            Grid.Column="1"
                            Height="40"
                            Margin="12,0,0,0"
                            Padding="16,0"
                            Background="#1A4D8F"
                            BorderThickness="0"
                            Click="SearchButton_Click"
                            CornerRadius="8"
                            Foreground="White">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontSize="14" Glyph="&#xE721;" />
                                <TextBlock Text="Search" FontWeight="SemiBold" />
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>

                <!--  FILTERS CARD  -->
                <Border Style="{StaticResource CardBorderStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Foreground="#111827"
                            Text="Filters" />

                        <Grid HorizontalAlignment="Stretch" ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <!--  Category  -->
                                <ColumnDefinition Width="*" />
                                <!--  Min price  -->
                                <ColumnDefinition Width="*" />
                                <!--  Max price  -->
                                <ColumnDefinition Width="*" />
                                <!--  Sort  -->
                            </Grid.ColumnDefinitions>

                            <!--  Category  -->
                            <StackPanel Grid.Column="0">
                                <TextBlock
                                    Margin="0,0,0,4"
                                    FontSize="12"
                                    Foreground="#6B7280"
                                    Text="Category" />
                                <ComboBox
                                    x:Name="CategoryComboBox"
                                    HorizontalAlignment="Stretch"
                                    BorderBrush="#E5E7EB"
                                    BorderThickness="1"
                                    SelectedIndex="0"
                                    SelectionChanged="CategoryComboBox_SelectionChanged"
                                    PlaceholderText="All Categories">
                                    <ComboBoxItem Content="All Categories" Tag="" />
                                    <ComboBoxItem Content="Smartphones" Tag="Smartphones" />
                                    <ComboBoxItem Content="Laptops" Tag="Laptops" />
                                    <ComboBoxItem Content="Audio" Tag="Audio" />
                                    <ComboBoxItem Content="Tablets" Tag="Tablets" />
                                    <ComboBoxItem Content="Wearables" Tag="Wearables" />
                                </ComboBox>
                            </StackPanel>

                            <!--  Min Price  -->
                            <StackPanel Grid.Column="1">
                                <TextBlock
                                    Margin="0,0,0,4"
                                    FontSize="12"
                                    Foreground="#6B7280"
                                    Text="Min Price" />
                                <TextBox
                                    x:Name="MinPriceTextBox"
                                    BorderBrush="#E5E7EB"
                                    BorderThickness="1"
                                    InputScope="Number"
                                    TextChanged="PriceTextBox_TextChanged"
                                    PlaceholderText="0" />
                            </StackPanel>

                            <!--  Max Price  -->
                            <StackPanel Grid.Column="2">
                                <TextBlock
                                    Margin="0,0,0,4"
                                    FontSize="12"
                                    Foreground="#6B7280"
                                    Text="Max Price" />
                                <TextBox
                                    x:Name="MaxPriceTextBox"
                                    BorderBrush="#E5E7EB"
                                    BorderThickness="1"
                                    InputScope="Number"
                                    TextChanged="PriceTextBox_TextChanged"
                                    PlaceholderText="∞" />
                            </StackPanel>

                            <!--  Sort By  -->
                            <StackPanel Grid.Column="3">
                                <TextBlock
                                    Margin="0,0,0,4"
                                    FontSize="12"
                                    Foreground="#6B7280"
                                    Text="Sort By" />
                                <ComboBox
                                    x:Name="SortByComboBox"
                                    HorizontalAlignment="Stretch"
                                    BorderBrush="#E5E7EB"
                                    BorderThickness="1"
                                    SelectedIndex="0"
                                    SelectionChanged="SortByComboBox_SelectionChanged">
                                    <ComboBoxItem Content="Rating (High to Low)" Tag="rating-desc" />
                                    <ComboBoxItem Content="Price (High to Low)" Tag="price-desc" />
                                    <ComboBoxItem Content="Price (Low to High)" Tag="price-asc" />
                                    <ComboBoxItem Content="Name (A-Z)" Tag="name-asc" />
                                    <ComboBoxItem Content="Name (Z-A)" Tag="name-desc" />
                                </ComboBox>
                            </StackPanel>
                        </Grid>

                        <!--  Apply Filter Button  -->
                        <Button
                            Margin="0,16,0,0"
                            Padding="16,10"
                            HorizontalAlignment="Right"
                            Background="#1A4D8F"
                            BorderThickness="0"
                            Click="ApplyFiltersButton_Click"
                            CornerRadius="8"
                            Foreground="White">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontSize="14" Glyph="&#xE71C;" />
                                <TextBlock Text="Apply Filters" FontWeight="SemiBold" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>

                <!--  PRODUCTS TABLE CARD  -->
                <Border Style="{StaticResource CardBorderStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Loading Skeleton  -->
                        <skeletons:SkeletonTable
                            Grid.Row="0"
                            Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />

                        <!--  Table  -->
                        <!-- COPILOT-FIX: Changed to {Binding} - dynamic API data -->
                        <ListView
                            x:Name="ProductsListView"
                            Grid.Row="0"
                            BorderThickness="0"
                            IsItemClickEnabled="False"
                            ItemsSource="{Binding Items, Mode=OneWay}"
                            Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                            <ListView.ItemContainerTransitions>
                                <TransitionCollection>
                                    <EntranceThemeTransition />
                                    <RepositionThemeTransition />
                                    <AddDeleteThemeTransition />
                                </TransitionCollection>
                            </ListView.ItemContainerTransitions>
                            <ListView.Resources>
                                <!--  để ListView trong suốt, giữ border ngoài  -->
                                <Style TargetType="ListView">
                                    <Setter Property="Background" Value="Transparent" />
                                </Style>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="Padding" Value="12,8" />
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                </Style>
                            </ListView.Resources>

                            <ListView.Header>
                                <!--  Header row  -->
                                <Grid Padding="8,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*" />
                                        <!--  Image  -->
                                        <ColumnDefinition Width="3*" />
                                        <!--  Name  -->
                                        <ColumnDefinition Width="2*" />
                                        <!--  Category  -->
                                        <ColumnDefinition Width="1*" />
                                        <!--  Price  -->
                                        <ColumnDefinition Width="2*" />
                                        <!--  Import Price  -->
                                        <ColumnDefinition Width="2*" />
                                        <!--  Stock  -->
                                        <ColumnDefinition Width="1*" />
                                        <!--  Rating  -->
                                        <ColumnDefinition Width="2*" />
                                        <!--  Actions  -->
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        Grid.Column="0"
                                        FontWeight="SemiBold"
                                        Text="Image" />
                                    <TextBlock
                                        Grid.Column="1"
                                        FontWeight="SemiBold"
                                        Text="Product Name" />
                                    <TextBlock
                                        Grid.Column="2"
                                        FontWeight="SemiBold"
                                        Text="Category" />
                                    <TextBlock
                                        Grid.Column="3"
                                        FontWeight="SemiBold"
                                        Text="Price" />
                                    <TextBlock
                                        Grid.Column="4"
                                        FontWeight="SemiBold"
                                        Text="Import Price" />
                                    <TextBlock
                                        Grid.Column="5"
                                        FontWeight="SemiBold"
                                        Text="Stock" />
                                    <TextBlock
                                        Grid.Column="6"
                                        FontWeight="SemiBold"
                                        Text="Rating" />
                                    <TextBlock
                                        Grid.Column="7"
                                        FontWeight="SemiBold"
                                        Text="Actions" />
                                </Grid>
                            </ListView.Header>

                            <!--  1 row  -->
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="viewmodels:ProductRow">
                                    <Grid Padding="-8,4,0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="3*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="2*" />
                                        </Grid.ColumnDefinitions>

                                        <!--  Image  -->
                                        <Border
                                            Grid.Column="0"
                                            Width="48"
                                            Height="48"
                                            HorizontalAlignment="Left"
                                            Background="#E5E7EB"
                                            CornerRadius="8">
                                            <Rectangle RadiusX="8" RadiusY="8">
                                                <Rectangle.Fill>
                                                    <ImageBrush ImageSource="{x:Bind Image}" Stretch="UniformToFill" />
                                                </Rectangle.Fill>
                                            </Rectangle>
                                        </Border>

                                        <!--  Product name + SKU  -->
                                        <StackPanel
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Spacing="2">
                                            <TextBlock Text="{x:Bind Name}" TextTrimming="CharacterEllipsis" />
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="#6B7280"
                                                Text="{x:Bind Sku}" />
                                        </StackPanel>

                                        <!--  Category  -->
                                        <TextBlock
                                            Grid.Column="2"
                                            VerticalAlignment="Center"
                                            Text="{x:Bind Category}" />
                                        <!--  Price  -->
                                        <TextBlock
                                            Grid.Column="3"
                                            VerticalAlignment="Center"
                                            Foreground="#10B981"
                                            Text="{x:Bind Price}" />

                                        <!--  Import price  -->
                                        <TextBlock
                                            Grid.Column="4"
                                            VerticalAlignment="Center"
                                            Foreground="#6B7280"
                                            Text="{x:Bind ImportPrice}" />

                                        <!--  Stock badge  -->
                                        <!--<Border Grid.Column="5"
                                                Style="{StaticResource StockBadgeStyle}"
                                                Background="#10B981">
                                        -->
                                        <!--  TODO: sau này dùng converter đổi màu theo Stock  -->
                                        <!--
                                            <TextBlock Text="{x:Bind Stock}"
                                                       Foreground="White"
                                                       FontSize="12"/>
                                        </Border>-->
                                        <Border
                                            Grid.Column="5"
                                            Margin="0,12"
                                            Padding="8,4"
                                            HorizontalAlignment="Center"
                                            Background="#10B981"
                                            CornerRadius="4">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontSize="12"
                                                Foreground="White"
                                                Text="{x:Bind Stock}" />
                                        </Border>
                                        <!--  Price  -->
                                        <TextBlock
                                            Grid.Column="3"
                                            VerticalAlignment="Center"
                                            Foreground="#10B981"
                                            Text="{x:Bind Price}" />

                                        <!--  Import price  -->
                                        <TextBlock
                                            Grid.Column="4"
                                            VerticalAlignment="Center"
                                            Foreground="#6B7280"
                                            Text="{x:Bind ImportPrice}" />

                                        <!--  Stock badge  -->
                                        <badges:StockBadge
                                            Grid.Column="5"
                                            HorizontalAlignment="Left"
                                            LowStockThreshold="10"
                                            Stock="{x:Bind Stock}" />

                                        <!--  Rating  -->
                                        <StackPanel
                                            Grid.Column="6"
                                            Orientation="Horizontal"
                                            Spacing="4">
                                            <TextBlock VerticalAlignment="Center" Text="{x:Bind Rating}" />
                                            <FontIcon
                                                FontSize="14"
                                                Foreground="#F59E0B"
                                                Glyph="&#xE735;" />
                                        </StackPanel>

                                        <!--  Actions  -->
                                        <StackPanel
                                            Grid.Column="7"
                                            Orientation="Horizontal"
                                            Spacing="4">
                                            <!--  View  -->
                                            <Button
                                                Command="{Binding DataContext.ViewProductCommand, ElementName=MyPage}"
                                                CommandParameter="{x:Bind}"
                                                Style="{StaticResource IconGhostButtonStyle}"
                                                ToolTipService.ToolTip="View details">
                                                <FontIcon Foreground="#6B7280" Glyph="&#xE8A7;" />
                                            </Button>

                                            <!--  Edit  -->
                                            <Button
                                                Command="{Binding DataContext.EditProductCommand, ElementName=MyPage}"
                                                CommandParameter="{x:Bind}"
                                                Style="{StaticResource IconGhostButtonStyle}"
                                                ToolTipService.ToolTip="Edit product">
                                                <FontIcon Foreground="#2563EB" Glyph="&#xE70F;" />
                                            </Button>

                                            <!--  Delete  -->
                                            <Button
                                                Command="{Binding DataContext.DeleteProductCommand, ElementName=MyPage}"
                                                CommandParameter="{x:Bind}"
                                                Style="{StaticResource IconGhostButtonStyle}"
                                                ToolTipService.ToolTip="Delete product">
                                                <FontIcon Foreground="#DC2626" Glyph="&#xE74D;" />
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <Grid
                            Grid.Row="1"
                            Margin="0,16,0,0"
                            Padding="16,12"
                            Background="Transparent"
                            BorderBrush="#E5E7EB"
                            BorderThickness="0,1,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <!--  Previous Button  -->
                            <Button
                                Grid.Column="0"
                                Padding="12,8"
                                Background="White"
                                BorderBrush="#E5E7EB"
                                BorderThickness="1"
                                Command="{x:Bind ViewModel.PreviousPageCommand}"
                                CornerRadius="8">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="14" Glyph="&#xE76B;" />
                                    <TextBlock Text="Previous" />
                                </StackPanel>
                            </Button>

                            <!--  Page Info  -->
                            <StackPanel
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Spacing="4">
                                <TextBlock
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Foreground="#111827"
                                    HorizontalAlignment="Center"
                                    Text="{x:Bind ViewModel.PageInfoText, Mode=OneWay}" />
                                <TextBlock
                                    FontSize="12"
                                    Foreground="#6B7280"
                                    HorizontalAlignment="Center"
                                    Text="{x:Bind ViewModel.ItemsInfoText, Mode=OneWay}" />
                            </StackPanel>

                            <!--  Next Button  -->
                            <Button
                                Grid.Column="2"
                                Padding="12,8"
                                Background="White"
                                BorderBrush="#E5E7EB"
                                BorderThickness="1"
                                Command="{x:Bind ViewModel.NextPageCommand}"
                                CornerRadius="8">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="Next" />
                                    <FontIcon FontSize="14" Glyph="&#xE76C;" />
                                </StackPanel>
                            </Button>
                        </Grid>

                    </Grid>
                </Border>

            </StackPanel>
        </ScrollViewer>
        </RefreshContainer>

        <!--  ADD PRODUCT DIALOG (BEFORE: Dialog trong React)  -->
        <ContentDialog
            x:Name="AddProductDialog"
            Title="Add New Product"
            DefaultButton="Primary"
            PrimaryButtonClick="AddProductDialog_PrimaryButtonClick"
            PrimaryButtonText="Save Product"
            SecondaryButtonClick="AddProductDialog_SecondaryButtonClick"
            SecondaryButtonText="Cancel">
            <StackPanel Spacing="12">
                <!--  Name  -->
                <StackPanel>
                    <TextBlock Margin="0,0,0,4" Text="Product Name *" />
                    <TextBox
                        x:Name="NewNameTextBox"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        PlaceholderText="Enter product name" />
                </StackPanel>

                <!--  Category + Stock  -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Category  -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Margin="0,0,0,4" Text="Category *" />
                        <ComboBox
                            x:Name="NewCategoryComboBox"
                            HorizontalAlignment="Stretch"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            PlaceholderText="Select category">
                            <ComboBoxItem Content="Smartphones" />
                            <ComboBoxItem Content="Laptops" />
                            <ComboBoxItem Content="Audio" />
                            <ComboBoxItem Content="Tablets" />
                            <ComboBoxItem Content="Wearables" />
                        </ComboBox>
                    </StackPanel>

                    <!--  Stock  -->
                    <StackPanel Grid.Column="1">
                        <TextBlock Margin="0,0,0,4" Text="Stock *" />
                        <TextBox
                            x:Name="NewStockTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0" />
                    </StackPanel>
                </Grid>

                <!--  Price + Import price  -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Margin="0,0,0,4" Text="Sale Price *" />
                        <TextBox
                            x:Name="NewPriceTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0.00" />
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Margin="0,0,0,4" Text="Import Price" />
                        <TextBox
                            x:Name="NewImportPriceTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0.00" />
                    </StackPanel>
                </Grid>

                <!--  Description  -->
                <StackPanel>
                    <TextBlock Margin="0,0,0,4" Text="Description" />
                    <TextBox
                        x:Name="NewDescriptionTextBox"
                        MinHeight="80"
                        AcceptsReturn="True"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        TextWrapping="Wrap" />
                </StackPanel>
            </StackPanel>
        </ContentDialog>

        <!--  EDIT PRODUCT DIALOG  -->
        <ContentDialog
            x:Name="EditProductDialog"
            Title="Edit Product"
            DefaultButton="Primary"
            PrimaryButtonClick="EditProductDialog_PrimaryButtonClick"
            PrimaryButtonText="Save Changes"
            SecondaryButtonClick="EditProductDialog_SecondaryButtonClick"
            SecondaryButtonText="Cancel">
            <StackPanel Spacing="12" MinWidth="400">
                <!--  Hidden ID field  -->
                <TextBox x:Name="EditProductIdTextBox" Visibility="Collapsed" />

                <!--  Name  -->
                <StackPanel>
                    <TextBlock Margin="0,0,0,4" Text="Product Name *" />
                    <TextBox
                        x:Name="EditNameTextBox"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        PlaceholderText="Enter product name" />
                </StackPanel>

                <!--  SKU  -->
                <StackPanel>
                    <TextBlock Margin="0,0,0,4" Text="SKU" />
                    <TextBox
                        x:Name="EditSkuTextBox"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        PlaceholderText="Product SKU" />
                </StackPanel>

                <!--  Category + Stock  -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Category  -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Margin="0,0,0,4" Text="Category *" />
                        <ComboBox
                            x:Name="EditCategoryComboBox"
                            HorizontalAlignment="Stretch"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            PlaceholderText="Select category">
                            <ComboBoxItem Content="Smartphones" Tag="Smartphones" />
                            <ComboBoxItem Content="Laptops" Tag="Laptops" />
                            <ComboBoxItem Content="Audio" Tag="Audio" />
                            <ComboBoxItem Content="Tablets" Tag="Tablets" />
                            <ComboBoxItem Content="Wearables" Tag="Wearables" />
                        </ComboBox>
                    </StackPanel>

                    <!--  Stock  -->
                    <StackPanel Grid.Column="1">
                        <TextBlock Margin="0,0,0,4" Text="Stock *" />
                        <TextBox
                            x:Name="EditStockTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0" />
                    </StackPanel>
                </Grid>

                <!--  Price + Import price  -->
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Margin="0,0,0,4" Text="Sale Price *" />
                        <TextBox
                            x:Name="EditPriceTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0.00" />
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Margin="0,0,0,4" Text="Import Price" />
                        <TextBox
                            x:Name="EditImportPriceTextBox"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            InputScope="Number"
                            PlaceholderText="0.00" />
                    </StackPanel>
                </Grid>

                <!--  Description  -->
                <StackPanel>
                    <TextBlock Margin="0,0,0,4" Text="Description" />
                    <TextBox
                        x:Name="EditDescriptionTextBox"
                        MinHeight="80"
                        AcceptsReturn="True"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1"
                        TextWrapping="Wrap" />
                </StackPanel>
            </StackPanel>
        </ContentDialog>

        <!--  VIEW PRODUCT DETAILS DIALOG  -->
        <ContentDialog
            x:Name="ViewProductDialog"
            Title="Product Details"
            CloseButtonText="Close"
            DefaultButton="Close">
            <ScrollViewer MaxHeight="500" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="16" MinWidth="450" Padding="0,8">
                    <!--  Product Image  -->
                    <Border
                        HorizontalAlignment="Center"
                        Width="200"
                        Height="200"
                        Background="#F3F4F6"
                        CornerRadius="12"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1">
                        <Grid>
                            <Image
                                x:Name="ViewProductImage"
                                Stretch="UniformToFill" />
                            <FontIcon
                                x:Name="ViewProductImagePlaceholder"
                                FontSize="48"
                                Foreground="#9CA3AF"
                                Glyph="&#xE8B9;"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                        </Grid>
                    </Border>

                    <!--  Product Name  -->
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="#6B7280"
                            Text="PRODUCT NAME" />
                        <TextBlock
                            x:Name="ViewProductName"
                            FontSize="18"
                            FontWeight="Bold"
                            Foreground="#111827"
                            TextWrapping="Wrap" />
                    </StackPanel>

                    <!--  SKU + Category Row  -->
                    <Grid ColumnSpacing="24">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#6B7280"
                                Text="SKU" />
                            <TextBlock
                                x:Name="ViewProductSku"
                                FontSize="14"
                                Foreground="#111827" />
                        </StackPanel>

                        <StackPanel Grid.Column="1" Spacing="4">
                            <TextBlock
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#6B7280"
                                Text="CATEGORY" />
                            <Border
                                Padding="8,4"
                                Background="#E0E7FF"
                                CornerRadius="4"
                                HorizontalAlignment="Left">
                                <TextBlock
                                    x:Name="ViewProductCategory"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Foreground="#3730A3" />
                            </Border>
                        </StackPanel>
                    </Grid>

                    <!--  Price Section  -->
                    <Border
                        Background="#F0FDF4"
                        CornerRadius="8"
                        Padding="16">
                        <Grid ColumnSpacing="24">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Spacing="4">
                                <TextBlock
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Foreground="#059669"
                                    Text="SELLING PRICE" />
                                <TextBlock
                                    x:Name="ViewProductPrice"
                                    FontSize="20"
                                    FontWeight="Bold"
                                    Foreground="#047857" />
                            </StackPanel>

                            <StackPanel Grid.Column="1" Spacing="4">
                                <TextBlock
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Foreground="#6B7280"
                                    Text="IMPORT PRICE" />
                                <TextBlock
                                    x:Name="ViewProductImportPrice"
                                    FontSize="16"
                                    Foreground="#374151" />
                            </StackPanel>

                            <StackPanel Grid.Column="2" Spacing="4">
                                <TextBlock
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Foreground="#6B7280"
                                    Text="PROFIT MARGIN" />
                                <TextBlock
                                    x:Name="ViewProductMargin"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Foreground="#10B981" />
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!--  Stock + Rating Row  -->
                    <Grid ColumnSpacing="24">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#6B7280"
                                Text="STOCK" />
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock
                                    x:Name="ViewProductStock"
                                    FontSize="24"
                                    FontWeight="Bold"
                                    Foreground="#111827" />
                                <Border
                                    x:Name="ViewProductStockBadge"
                                    Padding="8,4"
                                    CornerRadius="4"
                                    VerticalAlignment="Center">
                                    <TextBlock
                                        x:Name="ViewProductStockStatus"
                                        FontSize="12"
                                        FontWeight="SemiBold" />
                                </Border>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Spacing="4">
                            <TextBlock
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#6B7280"
                                Text="RATING" />
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock
                                    x:Name="ViewProductRating"
                                    FontSize="24"
                                    FontWeight="Bold"
                                    Foreground="#111827" />
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <FontIcon
                                        FontSize="16"
                                        Foreground="#F59E0B"
                                        Glyph="&#xE735;" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!--  ID (Technical Info)  -->
                    <Border
                        Background="#F3F4F6"
                        CornerRadius="8"
                        Padding="12">
                        <StackPanel Spacing="4">
                            <TextBlock
                                FontSize="11"
                                FontWeight="SemiBold"
                                Foreground="#9CA3AF"
                                Text="PRODUCT ID" />
                            <TextBlock
                                x:Name="ViewProductId"
                                FontSize="12"
                                FontFamily="Consolas"
                                Foreground="#6B7280"
                                IsTextSelectionEnabled="True" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </ContentDialog>
    </Grid>
</Page>
